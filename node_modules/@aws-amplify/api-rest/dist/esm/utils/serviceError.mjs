import { parseJsonError } from '@aws-amplify/core/internals/aws-client-utils';
import { RestApiError } from '../errors/RestApiError.mjs';
import '../errors/validation.mjs';

/**
 * Internal-only method to create a new RestApiError from a service error.
 *
 * @internal
 */
const buildRestApiServiceError = (error) => {
    const restApiError = new RestApiError({
        name: error?.name,
        message: error.message,
        underlyingError: error,
    });
    return restApiError;
};
const parseRestApiServiceError = async (response) => {
    const parsedError = await parseJsonError(response);
    if (!parsedError) {
        // Response is not an error.
        return;
    }
    return Object.assign(buildRestApiServiceError(parsedError), {
        $metadata: parsedError.$metadata,
    });
};

export { buildRestApiServiceError, parseRestApiServiceError };
//# sourceMappingURL=serviceError.mjs.map
